{"ast":null,"code":"import firebase from \"firebase/app\";\nimport axios from \"axios\";\nimport forge from \"node-forge\";\nexport default {\n  data() {\n    return {\n      userData: \"\",\n      posts: [],\n      md5: \"\",\n      load: true,\n      none: false\n    };\n  },\n  created() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.userData = user;\n        // user.email を md5 に変換\n        const md = forge.md.md5.create();\n        md.update(user.email);\n        this.md5 = md.digest().toHex();\n      }\n    });\n  },\n  mounted() {\n    axios.get(\"https://capset-backend-api.glitch.me/all\").then(response => {\n      this.posts = response.data;\n      if (this.posts.length == 0) {\n        this.none = true;\n      }\n      this.load = false;\n    }).catch(error => {\n      console.error(error);\n    });\n  },\n  methods: {\n    removeLive() {\n      axios.post(\"https://capset-backend-api.glitch.me/delete/\" + this.md5).then(response => {\n        console.log(response.data);\n        alert(\"ライブ配信を削除しました！\");\n        // リロード\n        this.$router.go({\n          path: this.$router.currentRoute.path,\n          force: true\n        });\n      }).catch(error => {\n        console.log(error);\n        alert(\"ライブ配信を削除できません...ログインしているアカウントが正しいか確認してください。\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["firebase","axios","forge","data","userData","posts","md5","load","none","created","auth","onAuthStateChanged","user","md","create","update","email","digest","toHex","mounted","get","then","response","length","catch","error","console","methods","removeLive","post","log","alert","$router","go","path","currentRoute","force"],"sources":["/Users/moka6652/Desktop/CAPSET-Frontend/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"container no-padding\">\n    <div v-if=\"load\" class=\"text-center mt-5 mb-5\">\n      <div class=\"spinner-border text-primary\" role=\"status\"></div>\n    </div>\n    <div style=\"\">\n      <h5 v-if=\"none\">ライブがありません...!</h5>\n    </div>\n    <div class=\"home m-3\">\n      <div v-for=\"post in posts\" :key=\"post.id\" class=\"flex-cont\">\n        <router-link :to=\"'/lives/' + post.id\">\n          <img\n            class=\"live-icon\"\n            :src=\"'https://gravatar.com/avatar/' + post.email + '?s=500'\"\n            :alt=\"post.email\"\n          />\n        </router-link>\n\n        <div class=\"itemin\">\n          <h5 class=\"card-title mt-2\">\n            <b>{{ post.title }}</b>\n          </h5>\n\n          <p class=\"card-text\">\n            <small class=\"text-muted\">{{ post.username }}</small\n            ><br />\n            <small class=\"text-muted\">{{ post.postdate }}</small>\n          </p>\n\n          <form @submit.prevent=\"removeLive\">\n            <button\n              v-if=\"post.username == userData.displayName\"\n              class=\"btn btn-dark\"\n              type=\"submit\"\n            >\n              削除\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport firebase from \"firebase/app\";\nimport axios from \"axios\";\nimport forge from \"node-forge\";\n\nexport default {\n  data() {\n    return {\n      userData: \"\",\n      posts: [],\n      md5: \"\",\n      load: true,\n      none: false,\n    };\n  },\n  created() {\n    firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        this.userData = user;\n        // user.email を md5 に変換\n        const md = forge.md.md5.create();\n        md.update(user.email);\n        this.md5 = md.digest().toHex();\n      }\n    });\n  },\n  mounted() {\n    axios\n      .get(\"https://capset-backend-api.glitch.me/all\")\n      .then((response) => {\n        this.posts = response.data;\n        if (this.posts.length == 0) {\n          this.none = true;\n        }\n        this.load = false;\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  },\n  methods: {\n    removeLive() {\n      axios\n        .post(\"https://capset-backend-api.glitch.me/delete/\" + this.md5)\n        .then((response) => {\n          console.log(response.data);\n          alert(\"ライブ配信を削除しました！\");\n          // リロード\n          this.$router.go({\n            path: this.$router.currentRoute.path,\n            force: true,\n          });\n        })\n        .catch((error) => {\n          console.log(error);\n          alert(\n            \"ライブ配信を削除できません...ログインしているアカウントが正しいか確認してください。\"\n          );\n        });\n    },\n  },\n};\n</script>\n\n<style>\n.home {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n}\n.home::after {\n  content: \"\";\n  display: block;\n  width: 650px;\n}\n\n.flex-cont {\n  border-radius: 10px;\n  box-shadow: 0px 1.5px 2px 1px #aaaaaa65;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  width: 300px;\n  background: #f8f8f8;\n}\n.live-icon {\n  border-radius: 10px 10px 0px 0px;\n  width: 100%;\n  height: 200px;\n  object-fit: cover;\n}\n.itemin {\n  margin: 10px;\n}\n</style>"],"mappings":"AA6CA,OAAOA,QAAO,MAAO,cAAc;AACnC,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,KAAI,MAAO,YAAY;AAE9B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,GAAG,EAAE,EAAE;MACPC,IAAI,EAAE,IAAI;MACVC,IAAI,EAAE;IACR,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACRT,QAAQ,CAACU,IAAI,EAAE,CAACC,kBAAkB,CAAEC,IAAI,IAAK;MAC3C,IAAIA,IAAI,EAAE;QACR,IAAI,CAACR,QAAO,GAAIQ,IAAI;QACpB;QACA,MAAMC,EAAC,GAAIX,KAAK,CAACW,EAAE,CAACP,GAAG,CAACQ,MAAM,EAAE;QAChCD,EAAE,CAACE,MAAM,CAACH,IAAI,CAACI,KAAK,CAAC;QACrB,IAAI,CAACV,GAAE,GAAIO,EAAE,CAACI,MAAM,EAAE,CAACC,KAAK,EAAE;MAChC;IACF,CAAC,CAAC;EACJ,CAAC;EACDC,OAAOA,CAAA,EAAG;IACRlB,KAAI,CACDmB,GAAG,CAAC,0CAA0C,EAC9CC,IAAI,CAAEC,QAAQ,IAAK;MAClB,IAAI,CAACjB,KAAI,GAAIiB,QAAQ,CAACnB,IAAI;MAC1B,IAAI,IAAI,CAACE,KAAK,CAACkB,MAAK,IAAK,CAAC,EAAE;QAC1B,IAAI,CAACf,IAAG,GAAI,IAAI;MAClB;MACA,IAAI,CAACD,IAAG,GAAI,KAAK;IACnB,CAAC,EACAiB,KAAK,CAAEC,KAAK,IAAK;MAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CAAC;EACN,CAAC;EACDE,OAAO,EAAE;IACPC,UAAUA,CAAA,EAAG;MACX3B,KAAI,CACD4B,IAAI,CAAC,8CAA6C,GAAI,IAAI,CAACvB,GAAG,EAC9De,IAAI,CAAEC,QAAQ,IAAK;QAClBI,OAAO,CAACI,GAAG,CAACR,QAAQ,CAACnB,IAAI,CAAC;QAC1B4B,KAAK,CAAC,eAAe,CAAC;QACtB;QACA,IAAI,CAACC,OAAO,CAACC,EAAE,CAAC;UACdC,IAAI,EAAE,IAAI,CAACF,OAAO,CAACG,YAAY,CAACD,IAAI;UACpCE,KAAK,EAAE;QACT,CAAC,CAAC;MACJ,CAAC,EACAZ,KAAK,CAAEC,KAAK,IAAK;QAChBC,OAAO,CAACI,GAAG,CAACL,KAAK,CAAC;QAClBM,KAAK,CACH,6CAA4C,CAC7C;MACH,CAAC,CAAC;IACN;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}